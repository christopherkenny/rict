---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# rict <img src="man/figures/logo.png" align="right" height="139" alt="" />

<!-- badges: start -->
<!-- badges: end -->

`rict` provides clean, formatted [`gt`](https://gt.rstudio.com/) tables to accompany redistricting maps.
It is designed to complement [`redist`](https://alarm-redist.org/redist/) and [`redistmetrics`](https://alarm-redist.org/redistmetrics/), but works with any electoral or demographic data.

## Installation

You can install the development version of `rict` from [GitHub](https://github.com/christopherkenny/rict) with:

``` r
pak::pak('christopherkenny/rict')
```

## Overview

`rict` provides a family of `rict_*()` functions, each producing a formatted table for a specific redistricting quantity:

| Function | Description |
|---|---|
| `rict()` | District-level summary from a `redist_map` or `redist_plans` |
| `rict_demographics()` | Population and voting-age population by race/ethnicity |
| `rict_elections()` | Democratic vote shares across electoral contests |
| `rict_compactness()` | Common compactness scores (Polsby-Popper, Reock, etc.) |
| `rict_population()` | Population and deviation from the ideal district size |
| `rict_splits()` | Number of administrative units split by the plan |
| `rict_contiguity()` | Number of contiguous pieces per district |

Additional helpers embed visuals directly inside a `gt` table:

| Function | Description |
|---|---|
| `gt_plot_sf()` | Embed district map thumbnails |
| `gt_plot_compactness()` | Embed compactness geometry plots |

## Examples

```{r setup, include = FALSE}
library(rict)
```

### Demographics

`rict_demographics()` summarizes total population and voting-age population by race/ethnicity across districts.

```{r demographics, eval = FALSE}
library(rict)
rict_demographics(map = wv, plan = wv$cd_2020)
```

```{r demographics-img, echo = FALSE, message = FALSE, warning = FALSE}
tab <- rict_demographics(map = wv, plan = wv$cd_2020)
gt::gtsave(tab, filename = "man/figures/README-demographics.png", expand = 10)
knitr::include_graphics("man/figures/README-demographics.png")
```

### Compactness

`rict_compactness()` tabulates common geometric compactness scores for each district.

```{r compactness, eval = FALSE}
rict_compactness(map = wv, plan = wv$cd_2020)
```

```{r compactness-img, echo = FALSE, message = FALSE, warning = FALSE}
tab <- rict_compactness(map = wv, plan = wv$cd_2020)
gt::gtsave(tab, filename = "man/figures/README-compactness.png", expand = 10)
knitr::include_graphics("man/figures/README-compactness.png")
```

### Elections

`rict_elections()` shows Democratic vote shares for each electoral contest, along with normal partisan averages.

```{r elections, eval = FALSE}
rict_elections(map = wv, plan = wv$cd_2020)
```

```{r elections-img, echo = FALSE, message = FALSE, warning = FALSE}
tab <- rict_elections(map = wv, plan = wv$cd_2020)
gt::gtsave(tab, filename = "man/figures/README-elections.png", expand = 10)
knitr::include_graphics("man/figures/README-elections.png")
```

### Plans

For a `redist_plans` object, `rict()` formats a single draw as a table.

```{r plans, eval = FALSE}
data(wv_plans)
rict(wv_plans, 'cd_2020')
```

```{r plans-img, echo = FALSE, message = FALSE, warning = FALSE}
data(wv_plans)
tab <- rict(wv_plans, 'cd_2020')
gt::gtsave(tab, filename = "man/figures/README-plans.png", expand = 10)
knitr::include_graphics("man/figures/README-plans.png")
```

